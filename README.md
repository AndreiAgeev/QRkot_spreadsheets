# Проект QRKot
## Описание:
Сервис QRKot, написаный с использованием фреймворков FastAPI и SQLAlchemy + Alembic в рамках обучения на платформе Yandex.Practicum.
Цель сервиса: "финансирование" различных проектов, связанных с котами (все финансовые движения - фиктивные). Сервис поддерживает работу с пользователями с помощью библеотеки FastAPI Users. Пользователи делятся на незарегистрированных, зарегистрированных и суперюзеров (администраторы).
Работа устроена следующим образом:
- Администраторы создают различные проекты, которые необхоимо "профинансировать". Для этого указываются название проекта, его описание и "сумма денежных средств", необходимых для закрытия проекта; При определённых условиях проекты можно удалять и редактировать (что также доступно только для администраторов). Просматривать проекты могут все пользователи. Функционал проектов доступен по эндпоинту **/charity_project/**, для редактировани и удаления проектов дополнительно указывается id проекта в БД - **/charity_project/<project_id>/**;
- Зарегистрированные пользователи могут "отправить" донаты в фонд, из которого автоматически выделяются "средства" на проекты по принципу First in, First out. Для отправки доната пользователь указывает количество "денежных средств" и комментарий (опционален). Пользователь может отправить запрос на просмотр всех своих донатов. Администраторы могут увидеть все донаты. Функционал донатов доступен по эндпоинту **/donation/**. Просмотреть свои донаты пользователь может, отправив запрос на **/donation/my/**.
- Администраторы проекта также могут создать таблицу со всеми закрытыми проектами, отсортированными по скорости закрытия. Таблица создаётся через Google API. Для этого понадобится данные сервис-аккаунта. Администраторы могут указать в списке переменных окружения .env либо путь до файла с данными сервис-аккаунта в параметре CREDENTIALS_FILE, либо указать в списке основные параметры сервис-аккаунта. После этого, сделав GET-запрос к эндпоинту **/google/** получает ссылку на созданную таблицу.
## Как запустить парсер на локальной машине:
Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/AndreiAgeev/cat_charity_fund.git
```

```
cd cat_charity_fund
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv .venv
```

* Если у вас Linux/macOS

    ```
    source .venv/bin/activate
    ```

* Если у вас Windows

    ```
    source .venv/scripts/activate
    ```

Обновить pip и установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```
Создать БД проекта:

```
alembic upgrade head
```
Запустить проект:

```
uvicorn app.main:app --reload
```
Проект будет доступен по адресу http://127.0.0.1:8000/. По адресу http://127.0.0.1:8000/docs/ откроется OpenAPI документация проекта, в которой описаны все эндоинты и где можно протестировать функционал сервиса. Также при запуске проекта автоматически создаётся суперюзер с почтой admin@example.com и паролем admin, которого можно использовать для тестов.
## Авторы:
**Идея и ТЗ** - Yandex.Practicum<br />
**Реализация** - Andrei Ageev (@AndreiAgeev)
